.mat-toolbar {
    background: #212529;
    color: #FFFFFF;
}

/* ซ่อนคลื่น overlay เมื่อปิด select (ตามที่โค้ดจัดการ class) */
.hidden-overlay { display: none !important; }

/* ปรับระยะ/ไอคอนตามชอบ */
button[mat-raised-button] {
  display: inline-flex;
  align-items: center;
  gap: .25rem;
  text-transform: none;
}

/* 1) ซ่อน trigger + ลูกศร ของ mat-select ที่วางอยู่ในปุ่ม */
.chart-filter-btn .mat-mdc-select-trigger,
.chart-filter-btn .mat-mdc-select-arrow {
  display: none !important;
}

/* 2) ทำให้ mat-select ไม่กินพื้นที่ในปุ่ม (ยังเรียก open() ได้ตามปกติ) */
.chart-filter-btn .mat-mdc-select {
  position: absolute !important;
  width: 0 !important;
  height: 0 !important;
  opacity: 0 !important;
  overflow: hidden !important;
}

/* (จากก่อนหน้า) คุมความกว้างแผงเป็น 180px */
.chart-filter-overlay-180 {
  width: 180px !important;
  min-width: 180px !important;
}
.chart-filter-panel {
  min-width: 180px !important;
}

/* ป้ายบนปุ่มให้ย่อ ... เมื่อยาว */
.chart-filter-btn {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  text-transform: none;
}
.chart-filter-btn .btn-label {
  max-width: 160px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
/* พื้นหลังทั้งหน้าของคอมโพเนนต์ */
:host {
  display: block;
  background: #101414; /* page bg */
  color: #FFFFFF;
}

/* การ์ด Bootstrap */
.card {
  background: #101414;
  border: 1px solid #2B3035;
  color: #FFFFFF;
}
.card-header {
  background: #212529 !important; /* header */
  color: #FFFFFF !important;
  border-bottom: 1px solid #2B3035;
}

/* ปรับพื้นที่กราฟ */
.chart-wrapper { padding: 6px 8px; background: transparent; }
#chart-detail { margin-top: 2px; }
#chart-brush  { margin-top: -10px; }

/* ปรับสีไอคอน/ปุ่มบนกราฟ */
:host ::ng-deep .apexcharts-toolbar { color: #FFFFFF; }
:host ::ng-deep .apexcharts-toolbar svg { fill: currentColor !important; }

/* ป้าย/ข้อความย่อย */
.text-muted { color: #B8C0C9 !important; }


// ----------------------------------
.map-card {
  background: #101414;
  border: 1px solid #2B3035;
  border-radius: 12px;
  overflow: hidden;
  color: #fff;
}
.map-header {
  background: #212529;
  color: #fff;
  padding: 12px 16px;
  font-weight: 700;
}
.race-map {
  height: 620px;         /* ปรับสูง-ต่ำได้ */
  width: 100%;
  background: #0e1113;   /* เผื่อโหลด tile ช้า */
}

/* ให้ control ของ Leaflet กลืนธีม */
:host ::ng-deep .leaflet-control-layers,
:host ::ng-deep .leaflet-bar {
  background: #212529 !important;
  color: #fff;
  border: 1px solid #2B3035 !important;
  box-shadow: none !important;
}
:host ::ng-deep .leaflet-control-layers-expanded {
  color: #fff;
}
:host ::ng-deep .leaflet-popup-content-wrapper,
:host ::ng-deep .leaflet-popup-tip {
  background: #212529;
  color: #fff;
  border: 1px solid #2B3035;
}


.track-image-container {
  position: relative;
  width: 100%;
  height: auto;
  overflow: hidden;
  border-radius: 8px;

  svg {
    width: 100%;
    height: 100%;
    object-fit: contain;

    image {
      width: 100%;
      height: 100%;
    }

    rect {
      // พื้นหลังสีขาวเมื่อไม่มีรูป track
    }

    text {
      font-family: 'Arial', sans-serif;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);

      // สไตล์สำหรับข้อความแจ้งเตือน
      &[text-anchor="middle"] {
        text-shadow: none;
        font-weight: 500;
      }
    }

    polyline {
      transition: all 0.3s ease;
      filter: drop-shadow(0 2px 4px rgba(0, 123, 255, 0.3));

      &:hover {
        stroke-width: 6;
        opacity: 1;
        filter: drop-shadow(0 4px 8px rgba(0, 123, 255, 0.5));
      }
    }

    circle {
      transition: all 0.3s ease;

      &:hover {
        r: 12;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
      }
    }
  }
}

.map-tooltip {
  position: absolute;
  /* ไม่ใช้ transform ที่นี่ เพราะตำแหน่งจะคำนวณใน component แล้ว */
  background: rgba(0, 0, 0, 0.8);
  color: #fff;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 14px;
  pointer-events: none; /* ทำให้เมาส์คลิกทะลุได้ */
  white-space: nowrap;
  z-index: 1000;
  /* เพิ่ม arrow หรือ styling เพื่อให้เห็นชัดว่าเชื่อมกับจุด */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.mat-mdc-option {
  min-height: 55px !important;
}

:host ::ng-deep .status-badge {
  display: inline-block;
  min-width: 88px;
  min-height: 50px;
  width: 100%;
  padding: 2px 10px;
  border-radius: 4px;
  font-weight: 700;
  line-height: 1.4;

  display: flex;
  justify-content: center;
  align-items: center;
}

/* ONLINE: พื้นเขียว, ตัวอักษร #212529 */
:host ::ng-deep .status-badge.is-online {
  background: #28a745;   /* เขียว */
  color: #212529;
}

/* OFFLINE: พื้น #6c757d, ตัวอักษรขาว */
:host ::ng-deep .status-badge.is-offline {
  background: #6c757d;
  color: #ffffff;
}

.card-body--flush {
  padding: 0 !important;
  margin: 0 !important;
  // border: none !important;
}

/* คอลัมน์ที่ต้องการเต็มจริง ๆ */
// .col-4.p-0, .col-md-8.p-0 {
//   padding: 0 !important;
// }

/* กล่องรูป/แผนที่ ให้กินพื้นที่การ์ดทั้งหมด */
.track-image-container {
  width: 100%;
  height: 100%;
  display: block;      /* กันช่องว่างจาก inline elements */
  line-height: 0;      /* ตัด white space รอบ SVG */
  overflow: hidden;    /* กันเกินขอบ */
}

/* ให้ SVG/รูปยืดเต็มพื้นที่กล่อง */
.track-image-container svg {
  display: block;
  width: 100%;
  height: 100%;
  overflow: hidden;
  clip-path: inset(0 0 0 0);
}

/* ถ้าจะคงสัดส่วนคงเดิม ใช้ preserveAspectRatio="xMidYMid meet"
   แต่ถ้าอยาก “เต็มกล่องจริง ๆ” แบบไม่เหลือขอบ ใช้ "none" (อาจยืด/บี้เล็กน้อย) */
.track-image-container image {
  width: 100%;
  height: 100%;
  display: block;
}

// SVG Controls Styles
.card-body.card-body--flush.p-2 {
  background: #212529;
  
  .btn {
    border-color: #2B3035;
    color: #CFD8DC;
    
    &:hover {
      background-color: #2B3035;
      border-color: #3B444D;
      color: #FFFFFF;
    }
    
    &.active {
      background-color: #FFCA28;
      border-color: #FFCA28;
      color: #212529;
    }
  }
  
  .btn-outline-danger:hover {
    background-color: #dc3545;
    border-color: #dc3545;
    color: #FFFFFF;
  }
  
  .input-group {
    .form-control {
      background-color: #101414;
      border-color: #2B3035;
      color: #FFFFFF;
      
      &:focus {
        background-color: #101414;
        border-color: #4FC3F7;
        color: #FFFFFF;
        box-shadow: 0 0 0 0.2rem rgba(79, 195, 247, 0.25);
      }
    }
    
    .input-group-text {
      background-color: #212529;
      border-color: #2B3035;
      color: #CFD8DC;
    }
  }
}